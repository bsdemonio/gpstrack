{"ast":null,"code":"import _slicedToArray from\"/Users/alancalvillo/Documents/ionic/gpstrack/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{IonContent,IonHeader,IonPage,IonTitle,IonToolbar,IonItem,IonLabel,IonButton}from'@ionic/react';import{useState}from'react';import axios from'axios';import moment from'moment';import{BackgroundMode}from'@ionic-native/background-mode';import'./Tab2.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var bg=BackgroundMode;bg.enable();var _useState=useState('N/A'),_useState2=_slicedToArray(_useState,2),lat=_useState2[0],setLat=_useState2[1];var _useState3=useState('N/A'),_useState4=_slicedToArray(_useState3,2),lon=_useState4[0],setLon=_useState4[1];var _useState5=useState('N/A'),_useState6=_slicedToArray(_useState5,2),time=_useState6[0],setTime=_useState6[1];var saveCoordinates=function saveCoordinates(){setInterval(function(){navigator.geolocation.getCurrentPosition(function(position){var lat=position.coords.latitude.toString();var long=position.coords.longitude.toString();var cellphone=localStorage.getItem(\"cellphone\");var name=localStorage.getItem(\"name\");var email=localStorage.getItem(\"email\");var profile=localStorage.getItem(\"profile\");setLat(lat);setLon(long);setTime(moment().format('DD-MM-YYYY HH:mm:ss a').toString());var formData=new FormData();formData.append(\"cellNumber\",cellphone);formData.append(\"name\",name);formData.append(\"email\",email);formData.append(\"profile\",profile);formData.append(\"lat\",lat);formData.append(\"long\",long);formData.append(\"date\",moment().format('DD-MM-YYYY'));formData.append(\"time\",moment().format('HH:mm:ss a'));//formData.append(\"cellNumber\", localStorage.getItem(\"cellphone\"));\naxios.post('https://com-geored.uaa.mx/save',formData).then(function(response){setLat(position.coords.latitude.toString());setLon(position.coords.longitude.toString());setTime(moment().format('DD-MM-YYYY HH:mm:ss a').toString());console.log(response);});});},1*60*100);};var Tab2=function Tab2(){return/*#__PURE__*/_jsxs(IonPage,{children:[/*#__PURE__*/_jsx(IonHeader,{children:/*#__PURE__*/_jsx(IonToolbar,{children:/*#__PURE__*/_jsx(IonTitle,{children:\"Iniciar Captura de Coordenadas\"})})}),/*#__PURE__*/_jsxs(IonContent,{fullscreen:true,children:[/*#__PURE__*/_jsx(IonHeader,{collapse:\"condense\",children:/*#__PURE__*/_jsx(IonToolbar,{children:/*#__PURE__*/_jsx(IonTitle,{size:\"large\",children:\"Coordenadas\"})})}),/*#__PURE__*/_jsxs(IonItem,{children:[/*#__PURE__*/_jsx(IonLabel,{children:\"Latitud\"}),/*#__PURE__*/_jsx(IonLabel,{children:lat})]}),/*#__PURE__*/_jsxs(IonItem,{children:[/*#__PURE__*/_jsx(IonLabel,{children:\"Longitud\"}),/*#__PURE__*/_jsx(IonLabel,{children:lon})]}),/*#__PURE__*/_jsxs(IonItem,{children:[/*#__PURE__*/_jsx(IonLabel,{children:\"Timestamp\"}),/*#__PURE__*/_jsx(IonLabel,{children:time})]}),/*#__PURE__*/_jsx(IonItem,{children:/*#__PURE__*/_jsx(IonButton,{expand:\"block\",color:\"primary\",onClick:function onClick(){return saveCoordinates();},children:\"Guardar\"})})]})]});};export default Tab2;","map":{"version":3,"sources":["/Users/alancalvillo/Documents/ionic/gpstrack/src/pages/Tab2.tsx"],"names":["IonContent","IonHeader","IonPage","IonTitle","IonToolbar","IonItem","IonLabel","IonButton","useState","axios","moment","BackgroundMode","bg","enable","lat","setLat","lon","setLon","time","setTime","saveCoordinates","setInterval","navigator","geolocation","getCurrentPosition","position","coords","latitude","toString","long","longitude","cellphone","localStorage","getItem","name","email","profile","format","formData","FormData","append","post","then","response","console","log","Tab2"],"mappings":"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","sourcesContent":["import { IonContent, IonHeader, IonPage, IonTitle, IonToolbar, IonItem, IonLabel, IonButton } from '@ionic/react';\nimport {useState} from 'react';\nimport ExploreContainer from '../components/ExploreContainer';\nimport axios from 'axios';\nimport moment from 'moment';\nimport { BackgroundMode } from '@ionic-native/background-mode';\n\nimport './Tab2.css';\nconst bg = BackgroundMode;\nbg.enable();\nconst [lat, setLat] = useState('N/A')  \nconst [lon, setLon] = useState('N/A')  \nconst [time, setTime] = useState('N/A')  \nconst saveCoordinates = () => {\n  setInterval(function(){\n      navigator.geolocation.getCurrentPosition(function(position) {\n        let lat:any = position.coords.latitude.toString()\n        let long:any = position.coords.longitude.toString()\n        let cellphone: any=localStorage.getItem(\"cellphone\")\n        let name: any=localStorage.getItem(\"name\")\n        let email: any=localStorage.getItem(\"email\")\n        let profile: any=localStorage.getItem(\"profile\")\n        setLat(lat)\n        setLon(long)\n        setTime(moment().format('DD-MM-YYYY HH:mm:ss a').toString())\n        var formData = new FormData();\n        \n        formData.append(\"cellNumber\", cellphone);\n        formData.append(\"name\", name);\n        formData.append(\"email\", email);\n        formData.append(\"profile\", profile);\n        formData.append(\"lat\", lat);\n        formData.append(\"long\", long);\n        formData.append(\"date\", moment().format('DD-MM-YYYY'));\n        formData.append(\"time\", moment().format('HH:mm:ss a'));\n        //formData.append(\"cellNumber\", localStorage.getItem(\"cellphone\"));\n        axios.post('https://com-geored.uaa.mx/save', formData).then(response => {             \n          setLat(position.coords.latitude.toString())\n          setLon(position.coords.longitude.toString())\n          setTime(moment().format('DD-MM-YYYY HH:mm:ss a').toString())\n          console.log(response);        \n        });\n        \n    });\n  }, 1 * 60 * 100);\n  \n  \n}\nconst Tab2: React.FC = () => {\n  return (\n    <IonPage>\n      <IonHeader>\n        <IonToolbar>\n          <IonTitle>Iniciar Captura de Coordenadas</IonTitle>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent fullscreen>\n        <IonHeader collapse=\"condense\">\n          <IonToolbar>\n            <IonTitle size=\"large\">Coordenadas</IonTitle>\n          </IonToolbar>\n        </IonHeader>\n        <IonItem>\n          <IonLabel>Latitud</IonLabel>          \n          <IonLabel>{lat}</IonLabel>\n        </IonItem>\n        <IonItem>\n          <IonLabel>Longitud</IonLabel>          \n          <IonLabel>{lon}</IonLabel>\n        </IonItem>\n        <IonItem>\n          <IonLabel>Timestamp</IonLabel>          \n          <IonLabel>{time}</IonLabel>\n        </IonItem>\n        <IonItem>\n          <IonButton expand=\"block\" color=\"primary\" onClick={ () => saveCoordinates() } >Guardar</IonButton>\n        </IonItem>\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default Tab2;\n"]},"metadata":{},"sourceType":"module"}